<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Okul Not YÃ¶netim Sistemi</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<style>
body{
    font-family: Arial;
    background:#eef2f5;
    display:flex;
    justify-content:center;
    padding:30px;
}
.container{
    background:white;
    width:900px;
    padding:25px;
    border-radius:15px;
    box-shadow:0 0 15px rgba(0,0,0,0.15);
}
select,input,button{
    width:100%;
    padding:10px;
    margin-top:8px;
    border-radius:8px;
    border:1px solid #aaa;
}
button{
    cursor:pointer;
    background:#007bff;
    color:white;
    font-size:16px;
}
button:hover{opacity:0.9}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}
th,td{
    border:1px solid #ccc;
    padding:8px;
    text-align:center;
}
th{background:#f2f2f2}
h2,h3{text-align:center}
hr{margin:20px 0}
</style>
</head>

<body>
<div class="container">

<h2>ğŸ« Okul Not YÃ¶netim Sistemi</h2>

<h3>1ï¸âƒ£ Excel DosyalarÄ±nÄ± YÃ¼kle</h3>
<input type="file" id="excelFiles" multiple accept=".xlsx,.xls">
<button onclick="dosyalariYukle()">Listeleri YÃ¼kle</button>

<hr>

<h3>2ï¸âƒ£ SÄ±nÄ±f & Ã–ÄŸrenci SeÃ§</h3>
<select id="sinifSelect" onchange="ogrencileriGetir()">
<option value="">SÄ±nÄ±f SeÃ§</option>
</select>

<select id="ogrenciSelect">
<option value="">Ã–ÄŸrenci SeÃ§</option>
</select>

<input type="number" id="sinavNot" placeholder="SÄ±nav Notu">
<input type="number" id="denemeNot" placeholder="Deneme Notu">

<button onclick="notKaydet()">Not Kaydet</button>

<hr>

<h3>ğŸ“Š SÄ±nÄ±f OrtalamalarÄ±</h3>
<table id="sinifTablo">
<tr>
<th>SÄ±nÄ±f</th>
<th>SÄ±nav Ort.</th>
<th>Deneme Ort.</th>
</tr>
</table>

<h3>ğŸ« Okul Geneli</h3>
<table>
<tr>
<th>Genel SÄ±nav Ort.</th>
<th>Genel Deneme Ort.</th>
</tr>
<tr>
<td id="genelSinav">-</td>
<td id="genelDeneme">-</td>
</tr>
</table>

</div>

<script>
let okul = {}; 
// okul["9A"]["Ali"] = {sinav:[..], deneme:[..]}

function dosyalariYukle(){
    let files = document.getElementById("excelFiles").files;
    if(files.length===0){alert("Dosya seÃ§!");return;}

    let sayac=0;
    for(let f of files){
        let reader=new FileReader();
        reader.onload=e=>{
            let wb=XLSX.read(e.target.result,{type:"binary"});
            let rows=XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]],{header:1});
            rows.forEach(r=>{
                let sinif=r[0], isim=r[1];
                if(!sinif||!isim)return;
                if(!okul[sinif]) okul[sinif]={};
                if(!okul[sinif][isim]) okul[sinif][isim]={sinav:[],deneme:[]};
            });
            sayac++;
            if(sayac===files.length){
                siniflariGuncelle();
                alert("TÃ¼m listeler yÃ¼klendi");
            }
        };
        reader.readAsBinaryString(f);
    }
}

function siniflariGuncelle(){
    let s=document.getElementById("sinifSelect");
    s.innerHTML='<option value="">SÄ±nÄ±f SeÃ§</option>';
    Object.keys(okul).sort().forEach(k=>{
        let o=document.createElement("option");
        o.value=k;o.textContent=k;
        s.appendChild(o);
    });
}

function ogrencileriGetir(){
    let sinif=sinifSelect.value;
    ogrenciSelect.innerHTML='<option value="">Ã–ÄŸrenci SeÃ§</option>';
    if(!okul[sinif])return;
    Object.keys(okul[sinif]).forEach(o=>{
        let opt=document.createElement("option");
        opt.value=o; opt.textContent=o;
        ogrenciSelect.appendChild(opt);
    });
}

function notKaydet(){
    let s=sinifSelect.value;
    let o=ogrenciSelect.value;
    let sn=Number(sinavNot.value);
    let dn=Number(denemeNot.value);
    if(!s||!o){alert("SÄ±nÄ±f ve Ã¶ÄŸrenci seÃ§");return;}
    if(sn) okul[s][o].sinav.push(sn);
    if(dn) okul[s][o].deneme.push(dn);
    sinavNot.value=""; denemeNot.value="";
    hesapla();
}

function ort(arr){
    return arr.length? (arr.reduce((a,b)=>a+b,0)/arr.length):0;
}

function hesapla(){
    let st=document.getElementById("sinifTablo");
    st.innerHTML='<tr><th>SÄ±nÄ±f</th><th>SÄ±nav Ort.</th><th>Deneme Ort.</th></tr>';

    let gs=[], gd=[];
    for(let s in okul){
        let ss=[], dd=[];
        for(let o in okul[s]){
            ss.push(...okul[s][o].sinav);
            dd.push(...okul[s][o].deneme);
        }
        let so=ort(ss), doo=ort(dd);
        if(so) gs.push(so);
        if(doo) gd.push(doo);

        let r=st.insertRow();
        r.insertCell(0).textContent=s;
        r.insertCell(1).textContent=so.toFixed(2);
        r.insertCell(2).textContent=doo.toFixed(2);
    }
    genelSinav.textContent=ort(gs).toFixed(2);
    genelDeneme.textContent=ort(gd).toFixed(2);
}
</script>
</body>
</html>




























